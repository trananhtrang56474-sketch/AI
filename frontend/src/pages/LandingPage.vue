<template>
  <div class="landing-page">
    <div class="ambient-light">
      <div class="light-orb orb-1"></div>
      <div class="light-orb orb-2"></div>
      <div class="light-orb orb-3"></div>
    </div>

    <nav class="navbar" :class="{ 'scrolled': isScrolled }">
      <div class="nav-content">
        <div class="brand">
          <span class="brand-logo">ğŸ§ </span>
          <span class="brand-text">AI å¿ƒçµä¼´ä¾£</span>
        </div>
        
        <div class="menu">
          <a 
            href="#vision" 
            :class="{ active: activeSection === 'vision' }"
            @click.prevent="scrollTo('#vision')"
          >
            æ„¿æ™¯
          </a>
          <a 
            href="#features" 
            :class="{ active: activeSection === 'features' }"
            @click.prevent="scrollTo('#features')"
          >
            åŠŸèƒ½
          </a>
          <a 
            href="#process" 
            :class="{ active: activeSection === 'process' }"
            @click.prevent="scrollTo('#process')"
          >
            æµç¨‹
          </a>
        </div>

        <button class="enter-btn" @click="goToApp">
          è¿›å…¥æ§åˆ¶å°
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </nav>

    <section class="screen hero-screen">
      <div class="screen-content">
        <div class="hero-text-wrapper reveal-item">
          <div class="tag">âœ¨ 2025 æ¯•ä¸šè®¾è®¡ä½œå“</div>
          <h1 class="hero-title">
            <span class="line">é‡å¡‘å†…å¿ƒçš„</span>
            <span class="line highlight">å¹³é™ä¸ç§©åº</span>
          </h1>
          <p class="hero-desc">
            ç»“åˆå¤šæ¨¡æ€æƒ…ç»ªè¯†åˆ«ä¸ RAG çŸ¥è¯†åº“çš„ AI å¿ƒç†é¡¾é—®ã€‚<br>
            åœ¨è¿™ä¸ªå–§åš£çš„æ•°å­—ä¸–ç•Œï¼Œä¸ºä½ ç•™ä¸€å¤„ç§å¯†ã€å®‰å…¨çš„å¿ƒçµæ –æ¯åœ°ã€‚
          </p>
          <div class="hero-actions">
            <button class="primary-btn big" @click="goToApp">ç«‹å³ä½“éªŒ</button>
            <button class="text-btn" @click="scrollTo('#vision')">äº†è§£æ›´å¤š â†“</button>
          </div>
        </div>
        
        <div class="hero-visual reveal-item delay-200">
          <div class="glass-card main-card">
            <div class="chat-header">
              <div class="avatar ai">AI</div>
              <div class="status">æ­£åœ¨è¾“å…¥...</div>
            </div>
            <div class="chat-body">
              <div class="msg ai">ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„ AI å¿ƒç†é¡¾é—®ã€‚ä»Šå¤©é‡åˆ°ä»€ä¹ˆæƒ³èŠèŠçš„äº‹äº†å—ï¼Ÿ</div>
              <div class="msg user">æœ€è¿‘æ„Ÿè§‰å‹åŠ›å¾ˆå¤§ï¼Œæ€»æ˜¯ç¡ä¸ç€...</div>
              <div class="msg ai-reply">
                <div class="reply-line short"></div>
                <div class="reply-line long"></div>
              </div>
            </div>
            <div class="float-card float-1">
              <span>ğŸ˜Š</span> æƒ…ç»ªæŒ‡æ•° <strong>8.5</strong>
            </div>
            <div class="float-card float-2">
              <span>ğŸ”’</span> éšç§åŠ å¯† <strong>ON</strong>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="vision" class="screen vision-screen">
      <div class="screen-content column-layout">
        <div class="section-head reveal-item">
          <h2>ç°ä»£äººçš„éšå½¢é‡æ‹…</h2>
          <p>æˆ‘ä»¬éƒ½åœ¨å¯»æ‰¾ä¸€ä¸ªå‡ºå£ï¼Œå´å¾€å¾€æ— å¤„å¯å»</p>
        </div>
        
        <div class="cards-row">
          <div class="hover-card reveal-item delay-100">
            <div class="card-icon">ğŸŒ‘</div>
            <h3>å­¤ç‹¬æ„Ÿ</h3>
            <p>é€šè®¯å½•é‡Œæœ‰å‡ ç™¾äººï¼Œæ·±å¤œå´æ‰¾ä¸åˆ°ä¸€ä¸ªå¯ä»¥å€¾è¯‰çš„å¯¹è±¡ã€‚</p>
          </div>
          <div class="hover-card reveal-item delay-200">
            <div class="card-icon">ğŸ’¸</div>
            <h3>é«˜æ˜‚æˆæœ¬</h3>
            <p>ä¸“ä¸šå’¨è¯¢å•æ¬¡è´¹ç”¨é«˜æ˜‚ï¼Œé¢„çº¦å‘¨æœŸé•¿ï¼Œéš¾ä»¥åº”å¯¹çªå‘æƒ…ç»ªã€‚</p>
          </div>
          <div class="hover-card reveal-item delay-300">
            <div class="card-icon">ğŸ˜¶</div>
            <h3>éš¾ä»¥å¯é½¿</h3>
            <p>æ‹…å¿ƒç§˜å¯†æ³„éœ²ï¼Œå®³æ€•è¢«ä»–äººè¯„åˆ¤ï¼Œé€‰æ‹©å°†æƒ…ç»ªå‹æŠ‘åœ¨å¿ƒåº•ã€‚</p>
          </div>
        </div>
      </div>
    </section>

    <section id="features" class="screen feature-screen">
      <div class="screen-content row-layout">
        <div class="feature-text reveal-item">
          <h2>ç§‘æŠ€çš„æ¸©åº¦</h2>
          <p class="big-desc">ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œæ›´æ˜¯æ‡‚ä½ çš„æ‹¥æŠ±ã€‚</p>
          
          <ul class="feature-list">
            <li>
              <span class="check">âœ“</span>
              <div>
                <strong>å…±æƒ…å¯¹è¯å¼•æ“</strong>
                <p>è¯†åˆ«å¾®è¡¨æƒ…ä¸è¯­è°ƒï¼Œç»™äºˆçœŸæ­£æ¸©æš–çš„å›åº”ã€‚</p>
              </div>
            </li>
            <li>
              <span class="check">âœ“</span>
              <div>
                <strong>RAG çŸ¥è¯†å¢å¼º</strong>
                <p>åŸºäº CBT (è®¤çŸ¥è¡Œä¸ºç–—æ³•) çŸ¥è¯†åº“ï¼Œå»ºè®®ç§‘å­¦æœ‰æ•ˆã€‚</p>
              </div>
            </li>
            <li>
              <span class="check">âœ“</span>
              <div>
                <strong>æƒ…ç»ªå¯è§†åŒ–</strong>
                <p>ç”Ÿæˆæƒ…ç»ªè¶‹åŠ¿å›¾ï¼Œçœ‹è§æ¯ä¸€æ¬¡ç§¯æçš„æ”¹å˜ã€‚</p>
              </div>
            </li>
          </ul>
        </div>
        
        <div class="feature-visual reveal-item delay-200">
          <div class="data-vis-card">
            <div class="graph-bars">
              <div class="bar" style="height: 40%"></div>
              <div class="bar" style="height: 70%"></div>
              <div class="bar" style="height: 50%"></div>
              <div class="bar active" style="height: 90%">
                <div class="tooltip">Mood: Happy</div>
              </div>
              <div class="bar" style="height: 60%"></div>
            </div>
            <div class="graph-label">æƒ…ç»ªç§¯æåº¦è¶‹åŠ¿</div>
          </div>
        </div>
      </div>
    </section>

    <section id="process" class="screen process-screen">
      <div class="screen-content column-layout">
        <div class="section-head reveal-item">
          <h2>å¼€å¯æ²»æ„ˆä¹‹æ—…</h2>
        </div>
        
        <div class="process-steps reveal-item">
          <div class="step">
            <div class="step-num">01</div>
            <h3>è¿›å…¥å¹³å°</h3>
          </div>
          <div class="step-line"></div>
          <div class="step">
            <div class="step-num">02</div>
            <h3>è‡ªç”±å€¾è¯‰</h3>
          </div>
          <div class="step-line"></div>
          <div class="step">
            <div class="step-num">03</div>
            <h3>è·å¾—æ´å¯Ÿ</h3>
          </div>
        </div>

        <div class="final-cta reveal-item delay-200">
          <h2>å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ</h2>
          <button class="primary-btn huge" @click="goToApp">
            è¿›å…¥ AI å¿ƒç†é¡¾é—®æ§åˆ¶å°
          </button>
          <p class="copyright">Â© 2025 AI Counselor Project. Graduation Design.</p>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import { useRouter } from 'vue-router';

const router = useRouter();
const isScrolled = ref(false);
const activeSection = ref(''); // è®°å½•å½“å‰åœ¨å“ªä¸ªæ¿å—

const goToApp = () => {
  router.push('/home');
};

const scrollTo = (selector) => {
  const el = document.querySelector(selector);
  if (el) {
    el.scrollIntoView({ behavior: 'smooth' });
  }
};

// --- æ»šåŠ¨æ˜¾ç°åŠ¨ç”» (Reveal Animation) ---
const setupRevealObserver = () => {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.reveal-item').forEach(el => observer.observe(el));
};

// --- æ»šåŠ¨ç›‘å¬é«˜äº® (Scroll Spy) ---
const setupScrollSpy = () => {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      // å½“æ¿å—äº¤å‰è¿›å…¥è§†å£ä¸­å¿ƒçº¿æ—¶ï¼Œæ›´æ–° activeSection
      if (entry.isIntersecting) {
        activeSection.value = entry.target.id;
      }
    });
  }, {
    // å…³é”®å‚æ•°ï¼šæŠŠè§†å£ç¼©å°åˆ°ä¸­é—´ä¸€æ¡çº¿ï¼Œå®ç°ç²¾å‡†åˆ¤æ–­
    rootMargin: "-50% 0px -50% 0px"
  });

  // ç›‘å¬æ‰€æœ‰å¸¦ id çš„ section
  document.querySelectorAll('section[id]').forEach(section => {
    observer.observe(section);
  });
};

const handleScroll = () => {
  isScrolled.value = window.scrollY > 50;
};

onMounted(() => {
  window.addEventListener('scroll', handleScroll);
  setupRevealObserver();
  setupScrollSpy();
});

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll);
});
</script>

<style scoped>
/* å¼•å…¥å­—ä½“ */
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

/* --- å…¨å±€ --- */
.landing-page {
  font-family: 'Space Grotesk', -apple-system, sans-serif;
  background-color: #f8fafc;
  color: #1e293b;
  overflow-x: hidden;
  position: relative;
  /* ç¡®ä¿å…¨å±å®½åº¦ */
  width: 100vw;
  min-height: 100vh;
}

/* æ²‰æµ¸å¼èƒŒæ™¯å…‰ */
.ambient-light {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  z-index: 0; pointer-events: none; overflow: hidden;
}
.light-orb { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.6; }
.orb-1 { width: 60vw; height: 60vw; background: radial-gradient(circle, #e0f2fe 0%, transparent 70%); top: -20%; right: -20%; }
.orb-2 { width: 50vw; height: 50vw; background: radial-gradient(circle, #f0fdf4 0%, transparent 70%); bottom: -10%; left: -10%; }
.orb-3 { width: 30vw; height: 30vw; background: radial-gradient(circle, #f5f3ff 0%, transparent 70%); top: 40%; left: 30%; opacity: 0.3; }

/* --- åŠ¨ç”»ç±» --- */
.reveal-item {
  opacity: 0;
  transform: translateY(60px);
  transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
}
.reveal-item.visible { opacity: 1; transform: translateY(0); }
.delay-100 { transition-delay: 0.1s; }
.delay-200 { transition-delay: 0.2s; }
.delay-300 { transition-delay: 0.3s; }

/* --- å±å¹•é€šç”¨å¸ƒå±€ --- */
.screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 1;
  padding: 80px 40px;
  box-sizing: border-box;
}

.screen-content {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
}

/* --- å¯¼èˆªæ  (åŒ…å«é«˜äº®é€»è¾‘) --- */
.navbar {
  position: fixed; top: 0; left: 0; width: 100%; height: 90px;
  z-index: 1000; transition: all 0.4s ease;
  display: flex; align-items: center; justify-content: center;
}
.navbar.scrolled {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(20px);
  height: 70px;
  border-bottom: 1px solid rgba(0,0,0,0.05);
}
.nav-content {
  width: 100%; max-width: 1400px; padding: 0 40px;
  display: flex; justify-content: space-between; align-items: center;
}
.brand { font-size: 20px; font-weight: 700; color: #0f172a; display: flex; align-items: center; gap: 8px; }
.brand-logo { font-size: 24px; }

/* èœå•æ ·å¼ */
.menu { display: flex; gap: 40px; }
.menu a { 
  text-decoration: none; 
  color: #64748b; 
  font-weight: 500; 
  font-size: 15px; 
  transition: all 0.3s; 
  position: relative;
  padding: 5px 0;
}

/* æ¿€æ´»æˆ–æ‚¬åœçŠ¶æ€ */
.menu a:hover,
.menu a.active { 
  color: #1890ff; 
  font-weight: 600;
}

/* ä¸‹åˆ’çº¿åŠ¨ç”» */
.menu a::after { 
  content: ''; 
  position: absolute; 
  bottom: 0; 
  left: 0; 
  width: 0; 
  height: 2px; 
  background: #1890ff; 
  transition: width 0.3s ease; 
  border-radius: 2px;
}
/* æ¿€æ´»æ—¶å±•å¼€ä¸‹åˆ’çº¿ */
.menu a:hover::after,
.menu a.active::after { 
  width: 100%; 
}

.enter-btn {
  background: #0f172a; color: #fff; border: none; padding: 10px 20px; border-radius: 50px;
  font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 6px;
}
.enter-btn:hover { background: #1890ff; transform: scale(1.05); }
.icon { width: 16px; height: 16px; }

/* --- Screen 1: Hero --- */
.hero-screen .screen-content {
  display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center;
}
.tag {
  display: inline-block; padding: 6px 14px; background: rgba(24, 144, 255, 0.1); color: #1890ff;
  border-radius: 20px; font-size: 13px; font-weight: 600; margin-bottom: 24px;
}
.hero-title {
  font-size: 72px; line-height: 1.1; font-weight: 800; color: #0f172a; margin-bottom: 24px;
  letter-spacing: -2px;
}
.hero-title .line { display: block; }
.hero-title .highlight { 
  background: linear-gradient(120deg, #1890ff, #3b82f6); -webkit-background-clip: text; background-clip: text; color: transparent; 
}
.hero-desc { font-size: 20px; color: #64748b; line-height: 1.6; margin-bottom: 40px; max-width: 500px; }
.hero-actions { display: flex; gap: 20px; align-items: center; }
.primary-btn {
  background: #1890ff; color: #fff; border: none; padding: 16px 40px; border-radius: 12px;
  font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 20px 40px rgba(24, 144, 255, 0.3);
  transition: all 0.3s;
}
.primary-btn:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 25px 50px rgba(24, 144, 255, 0.4); }
.text-btn { background: none; border: none; font-size: 16px; color: #64748b; cursor: pointer; font-weight: 500; }
.text-btn:hover { color: #1890ff; }

/* ç»ç’ƒå¡ç‰‡ */
.hero-visual { position: relative; perspective: 1000px; }
.glass-card {
  background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.8); border-radius: 24px;
  padding: 24px; box-shadow: 0 40px 80px -10px rgba(0, 0, 0, 0.1);
  transform: rotateY(-10deg) rotateX(5deg); transition: transform 0.5s ease;
}
.glass-card:hover { transform: rotateY(0) rotateX(0); }
.chat-header { display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; }
.avatar.ai { width: 40px; height: 40px; background: #1890ff; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; }
.status { font-size: 12px; color: #1890ff; }
.chat-body { display: flex; flex-direction: column; gap: 12px; }
.msg { padding: 12px 16px; border-radius: 12px; font-size: 14px; max-width: 80%; }
.msg.ai { background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.05); align-self: flex-start; }
.msg.user { background: #1890ff; color: #fff; align-self: flex-end; }
.reply-line { height: 8px; background: #e2e8f0; border-radius: 4px; margin-bottom: 6px; }
.reply-line.short { width: 60%; } .reply-line.long { width: 90%; }
.float-card {
  position: absolute; background: #fff; padding: 10px 16px; border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1); font-size: 13px; font-weight: 600;
  display: flex; gap: 8px; align-items: center; animation: float 6s infinite ease-in-out;
}
.float-1 { top: -20px; right: -20px; animation-delay: 0s; }
.float-2 { bottom: -20px; left: -20px; animation-delay: 2s; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

/* --- Screen 2: Vision --- */
.vision-screen { background: #fff; }
.column-layout { text-align: center; }
.section-head h2 { font-size: 48px; margin-bottom: 16px; color: #0f172a; letter-spacing: -1px; }
.section-head p { font-size: 18px; color: #64748b; margin-bottom: 80px; }
.cards-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
.hover-card {
  text-align: left; padding: 40px; border-radius: 24px; background: #f8fafc;
  transition: all 0.4s; border: 1px solid transparent;
}
.hover-card:hover { background: #fff; box-shadow: 0 30px 60px rgba(0,0,0,0.08); transform: translateY(-10px); border-color: #e2e8f0; }
.card-icon { font-size: 40px; margin-bottom: 24px; }
.hover-card h3 { font-size: 24px; margin-bottom: 12px; }
.hover-card p { color: #64748b; line-height: 1.6; }

/* --- Screen 3: Features --- */
.row-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: center; }
.big-desc { font-size: 24px; font-weight: 300; color: #475569; margin-bottom: 40px; }
.feature-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 30px; }
.feature-list li { display: flex; gap: 20px; }
.check { width: 24px; height: 24px; background: #dcfce7; color: #16a34a; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: bold; }
.feature-list strong { font-size: 18px; display: block; margin-bottom: 4px; }
.feature-list p { color: #64748b; margin: 0; }

.data-vis-card {
  background: #fff; padding: 40px; border-radius: 24px; box-shadow: 0 30px 60px rgba(0,0,0,0.08);
  height: 400px; display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
}
.graph-bars { display: flex; align-items: flex-end; gap: 20px; height: 300px; width: 100%; justify-content: center; }
.bar { width: 40px; background: #e2e8f0; border-radius: 8px 8px 0 0; position: relative; transition: height 1s; }
.bar.active { background: #1890ff; box-shadow: 0 0 20px rgba(24, 144, 255, 0.4); }
.tooltip {
  position: absolute; top: -40px; left: 50%; transform: translateX(-50%);
  background: #0f172a; color: #fff; padding: 6px 12px; border-radius: 6px; font-size: 12px; white-space: nowrap;
}
.graph-label { margin-top: 20px; font-weight: 600; color: #64748b; }

/* --- Screen 4: Process & Footer --- */
.process-screen { background: #0f172a; color: #fff; text-align: center; }
.process-screen .section-head h2 { color: #fff; }
.process-steps { display: flex; justify-content: center; align-items: center; gap: 60px; margin-bottom: 100px; }
.step { position: relative; }
.step-num { font-size: 60px; font-weight: 900; color: rgba(255,255,255,0.1); margin-bottom: -30px; }
.step h3 { font-size: 24px; position: relative; z-index: 1; }
.step-line { width: 100px; height: 2px; background: rgba(255,255,255,0.1); }

.final-cta h2 { font-size: 48px; margin-bottom: 40px; }
.primary-btn.huge { font-size: 20px; padding: 20px 60px; border-radius: 50px; }
.copyright { margin-top: 80px; color: #475569; font-size: 14px; }
</style>